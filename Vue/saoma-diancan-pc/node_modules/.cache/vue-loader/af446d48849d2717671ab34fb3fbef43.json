{"remainingRequest":"D:\\test\\smdc\\Vue\\saoma-diancan-pc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\test\\smdc\\Vue\\saoma-diancan-pc\\src\\page\\dish-management\\dishes-list.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\test\\smdc\\Vue\\saoma-diancan-pc\\src\\page\\dish-management\\dishes-list.vue","mtime":1733060113696},{"path":"D:\\test\\smdc\\Vue\\saoma-diancan-pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733062317302},{"path":"D:\\test\\smdc\\Vue\\saoma-diancan-pc\\node_modules\\babel-loader\\lib\\index.js","mtime":1733062318538},{"path":"D:\\test\\smdc\\Vue\\saoma-diancan-pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733062317302},{"path":"D:\\test\\smdc\\Vue\\saoma-diancan-pc\\node_modules\\vue-loader\\lib\\index.js","mtime":1733062316941}],"contextDependencies":[],"result":["\r\nimport { mapGetters } from 'vuex'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tdishesList: []\r\n\t\t}\r\n\t},\r\n\t\r\n\tcomputed: {\r\n\t\t...mapGetters(['currentMerchant'])\r\n\t},\r\n\t\r\n\tcreated() {\r\n\t\tthis.getDishesList()\r\n\t},\r\n\t\r\n\tmethods: {\r\n\t\t// 获取菜品列表\r\n\t\tasync getDishesList() {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await new this.Request(\r\n\t\t\t\t\tthis.Urls.dish.list(this.currentMerchant.id)\r\n\t\t\t\t).modeget()\r\n\t\t\t\t\r\n\t\t\t\tif (res.code === 0) {\r\n\t\t\t\t\tthis.dishesList = res.data\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('获取菜品列表失败：', error)\r\n\t\t\t\tthis.$message.error('获取菜品列表失败')\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// 修改菜品状态\r\n\t\tasync handleStatusChange(dish) {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await new this.Request(\r\n\t\t\t\t\tthis.Urls.dish.status(dish.id)\r\n\t\t\t\t).modeput({\r\n\t\t\t\t\tstatus: dish.status,\r\n\t\t\t\t\tmerchantId: this.currentMerchant.id\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (res.code === 0) {\r\n\t\t\t\t\tthis.$message.success('状态修改成功')\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdish.status = dish.status === 1 ? 0 : 1 // 恢复状态\r\n\t\t\t\t\tthis.$message.error(res.msg || '状态修改失败')\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tdish.status = dish.status === 1 ? 0 : 1 // 恢复状态\r\n\t\t\t\tthis.$message.error('状态修改失败')\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// 编辑菜品\r\n\t\teditDish(dish) {\r\n\t\t\tthis.$router.push({\r\n\t\t\t\tpath: '/upload',\r\n\t\t\t\tquery: { id: dish.id }\r\n\t\t\t})\r\n\t\t},\r\n\t\t\r\n\t\t// 删除菜品\r\n\t\tasync deleteDish(dish) {\r\n\t\t\ttry {\r\n\t\t\t\tawait this.$confirm('确认删除该菜品吗？', '提示', {\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tconst res = await new this.Request(\r\n\t\t\t\t\tthis.Urls.dish.delete(dish.id)\r\n\t\t\t\t).modedelete()\r\n\t\t\t\t\r\n\t\t\t\tif (res.code === 0) {\r\n\t\t\t\t\tthis.$message.success('删除成功')\r\n\t\t\t\t\tthis.getDishesList()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$message.error(res.msg || '删除失败')\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tif (error !== 'cancel') {\r\n\t\t\t\t\tthis.$message.error('删除失败')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n",{"version":3,"sources":["dishes-list.vue"],"names":[],"mappings":";AAsCA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dishes-list.vue","sourceRoot":"src/page/dish-management","sourcesContent":["<template>\r\n\t<div class=\"dishes-container\">\r\n\t\t<!-- 操作栏 -->\r\n\t\t<div class=\"operation-bar\">\r\n\t\t\t<el-button type=\"primary\" @click=\"$router.push('/upload')\">新增菜品</el-button>\r\n\t\t</div>\r\n\r\n\t\t<!-- 菜品列表 -->\r\n\t\t<el-table :data=\"dishesList\" border>\r\n\t\t\t<el-table-column prop=\"name\" label=\"菜品名称\"></el-table-column>\r\n\t\t\t<el-table-column prop=\"categoryName\" label=\"所属分类\"></el-table-column>\r\n\t\t\t<el-table-column prop=\"price\" label=\"价格\" width=\"120\"></el-table-column>\r\n\t\t\t<el-table-column label=\"图片\" width=\"120\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<img :src=\"scope.row.image\" class=\"dish-image\">\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column prop=\"status\" label=\"状态\" width=\"120\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-switch\r\n\t\t\t\t\t\tv-model=\"scope.row.status\"\r\n\t\t\t\t\t\t:active-value=\"1\"\r\n\t\t\t\t\t\t:inactive-value=\"0\"\r\n\t\t\t\t\t\t@change=\"handleStatusChange(scope.row)\"\r\n\t\t\t\t\t></el-switch>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"操作\" width=\"200\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-button type=\"text\" @click=\"editDish(scope.row)\">编辑</el-button>\r\n\t\t\t\t\t<el-button type=\"text\" @click=\"deleteDish(scope.row)\" class=\"delete-btn\">删除</el-button>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t</el-table>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tdishesList: []\r\n\t\t}\r\n\t},\r\n\t\r\n\tcomputed: {\r\n\t\t...mapGetters(['currentMerchant'])\r\n\t},\r\n\t\r\n\tcreated() {\r\n\t\tthis.getDishesList()\r\n\t},\r\n\t\r\n\tmethods: {\r\n\t\t// 获取菜品列表\r\n\t\tasync getDishesList() {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await new this.Request(\r\n\t\t\t\t\tthis.Urls.dish.list(this.currentMerchant.id)\r\n\t\t\t\t).modeget()\r\n\t\t\t\t\r\n\t\t\t\tif (res.code === 0) {\r\n\t\t\t\t\tthis.dishesList = res.data\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('获取菜品列表失败：', error)\r\n\t\t\t\tthis.$message.error('获取菜品列表失败')\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// 修改菜品状态\r\n\t\tasync handleStatusChange(dish) {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await new this.Request(\r\n\t\t\t\t\tthis.Urls.dish.status(dish.id)\r\n\t\t\t\t).modeput({\r\n\t\t\t\t\tstatus: dish.status,\r\n\t\t\t\t\tmerchantId: this.currentMerchant.id\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (res.code === 0) {\r\n\t\t\t\t\tthis.$message.success('状态修改成功')\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdish.status = dish.status === 1 ? 0 : 1 // 恢复状态\r\n\t\t\t\t\tthis.$message.error(res.msg || '状态修改失败')\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tdish.status = dish.status === 1 ? 0 : 1 // 恢复状态\r\n\t\t\t\tthis.$message.error('状态修改失败')\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// 编辑菜品\r\n\t\teditDish(dish) {\r\n\t\t\tthis.$router.push({\r\n\t\t\t\tpath: '/upload',\r\n\t\t\t\tquery: { id: dish.id }\r\n\t\t\t})\r\n\t\t},\r\n\t\t\r\n\t\t// 删除菜品\r\n\t\tasync deleteDish(dish) {\r\n\t\t\ttry {\r\n\t\t\t\tawait this.$confirm('确认删除该菜品吗？', '提示', {\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tconst res = await new this.Request(\r\n\t\t\t\t\tthis.Urls.dish.delete(dish.id)\r\n\t\t\t\t).modedelete()\r\n\t\t\t\t\r\n\t\t\t\tif (res.code === 0) {\r\n\t\t\t\t\tthis.$message.success('删除成功')\r\n\t\t\t\t\tthis.getDishesList()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$message.error(res.msg || '删除失败')\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tif (error !== 'cancel') {\r\n\t\t\t\t\tthis.$message.error('删除失败')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.dishes-container {\r\n\tpadding: 20px;\r\n}\r\n\r\n.operation-bar {\r\n\tmargin-bottom: 20px;\r\n}\r\n\r\n.dish-image {\r\n\twidth: 50px;\r\n\theight: 50px;\r\n\tobject-fit: cover;\r\n\tborder-radius: 4px;\r\n}\r\n\r\n.delete-btn {\r\n\tcolor: #F56C6C;\r\n}\r\n</style>\r\n"]}]}